#!/bin/bash


Encode () {

a="$(cat $2)"
eval A_+=(\$\'\\\\\\{1,0}{0..7}{0..7}\')
B_=(${A_[@]//[\\|\*|[:cntrl:]]/})
eval declare -A C_[\${B_[D++]/#/\\\\}]={00..95}
eval C_[{95..00}]=${B_[$((--D))]/#/\\}
C_+=([$'\t']=96 [$'\n']=99 [' ']=98 [\*]=97 [99]=$'\n' [97]=\* [98]=' ' [96]=$'\t')
[[ $1 = F ]] && X=1

        for (( A=0; A <= ${#a}; A=A+${X:=2} )); do
        echo -n "${C_["${a:$A:${X:=2}}"]}"
        done

}

Encode "$@"
